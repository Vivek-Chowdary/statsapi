{
  "swagger": "2.0",
  "info": {
    "version": "1.0.0",
    "title": "Endurance Racing Stats API",
    "description": "API to return basic static for IMSA and WEC",
    "termsOfService": "http://swagger.io/terms/"
  },
  "host": "echo-api.endpoints.round-folio-164619.cloud.goog",
  "basePath": "/",
  "schemes": [
    "http"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/api/getevents": {
       "get": {
          "description": "Retrieves the list of races available in the system",
          "operationId": "for the URL",
          "produces": [
            "application/json"
          ],
          "responses": {
            "200": {
              "description": "GET OK, send list of races",
              "schema": {
                 "$ref": "#/definitions/raceList"
              }
            }
          }
        }
    },
    "/api/{series}/{year}/{race}": {
           "get":{
             "description":"Retrieves the details for a race at driver level. Nnumber of laps, best lap, average and top 20 best laps average",
             "operationId":"Retrieve Driver stat",
             "produces": [
               "application/json"
             ],
             "parameters":[
                 {
                   "name": "series",
                   "in": "path",
                   "description": "Name of the series",
                   "required": true,
                   "type": "string"
                 },
                 {
                   "name": "year",
                   "in": "path",
                   "description": "Year of the race",
                   "required": true,
                   "type": "string"
                 },
                 {
                   "name": "race",
                   "in": "path",
                   "description": "Race to query",
                   "required": true,
                   "type": "string"
                 }
               ],
             "responses": {
               "200": {
                 "description": "OK",
                 "schema":{
                   "$ref":"#/definitions/raceData"
                 }
               },
               "404": {
                 "description": "Race not Found"
               }
             }
           }
    }
  },

  "definitions": {
    "raceList":{
      "type": "array",
      "items": {
        "$ref": "#/definitions/raceobject"
      }
    },
    "raceData":{
      "type": "array",
      "items": {
        "$ref": "#/definitions/raceDataRecord"
      }
    },
    "raceDataRecord": {
        "properties": {
            "class": {
              "type" : "string",
              "example" : "LMP1"
            },
            "manufacturer" : {
              "type": "string",
              "example": "Aston Martin"
            },
            "team" : {
              "type": "string",
              "example": "Manor"
            },
            "driver" : {
              "type": "string",
              "example": "Andre Lotterer"
            },
            "laps" : {
              "type": "number",
              "example": "78"
            },
            "min" : {
              "type": "number",
              "example": "178.44"
            },
            "avg" : {
              "type": "number",
              "example": "188.44"
            },
            "Top 20 average" : {
              "type": "number",
              "example": "183.44"
            }
        }
    },
    "raceobject": {
        "properties": {
            "series": {
              "type" : "string",
              "example" : "IMSA"
            },
            "year" : {
              "type": "string",
              "example": "2017"
            },
            "event" : {
              "type": "string",
              "example": "SEBRING"
            }
        }
    }
  }
}
